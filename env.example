# OCI Delivery Agent Environment Variables
# Copy this file to .env and fill in your actual values

# =============================================================================
# OCI Object Storage Configuration
# =============================================================================
# OCI Object Storage namespace (required for OCI operations)
OCI_OS_NAMESPACE=your_oci_namespace

# OCI Object Storage bucket name for delivery photos
OCI_OS_BUCKET=your_delivery_bucket

# Prefix for delivery objects in the bucket (default: "deliveries/")
DELIVERY_PREFIX=deliveries/

# =============================================================================
# OCI Generative AI Configuration
# =============================================================================
# OCI Compartment OCID where resources are located
OCI_COMPARTMENT_ID=<YOUR_COMPARTMENT_ID>

# OCI Generative AI endpoint OCID (for both text and vision processing)
# This should be the endpoint OCID, not the model OCID
OCI_TEXT_MODEL_OCID=<YOUR_ENDPOINT_OCID>

# OCI Generative AI service endpoint (base URL without path)
# Format: https://inference.generativeai.{region}.oci.oraclecloud.com
OCI_GENAI_HOSTNAME=https://inference.generativeai.us-chicago-1.oci.oraclecloud.com

# =============================================================================
# Geolocation Configuration
# =============================================================================
# Maximum distance in meters for location validation (default: 50)
MAX_DISTANCE_METERS=50

# Geocoding API endpoint for address validation (optional)
GEOCODING_ENDPOINT=https://your-geocoding-service.com/api

# =============================================================================
# Quality Index Weights
# =============================================================================
# Weight for timeliness in quality calculation (default: 0.3)
WEIGHT_TIMELINESS=0.3

# Weight for location accuracy in quality calculation (default: 0.3)
WEIGHT_LOCATION=0.3

# Weight for damage score in quality calculation (default: 0.4)
WEIGHT_DAMAGE=0.4

# =============================================================================
# Damage Scoring Configuration
# =============================================================================
# These thresholds define the score ranges for each damage severity level
# Scores represent damage probability (0.0 = no damage, 1.0 = severe damage)
# The final quality score is calculated as: quality = 1 - damage_score

# Maximum score for "none" severity (default: 0.1)
# Any damage score <= this value is considered no damage
DAMAGE_SCORE_NONE_MAX=0.1

# Minimum score for "minor" damage severity (default: 0.3)
DAMAGE_SCORE_MINOR_MIN=0.3

# Maximum score for "minor" damage severity (default: 0.4)
DAMAGE_SCORE_MINOR_MAX=0.4

# Minimum score for "moderate" damage severity (default: 0.6)
DAMAGE_SCORE_MODERATE_MIN=0.6

# Maximum score for "moderate" damage severity (default: 0.7)
DAMAGE_SCORE_MODERATE_MAX=0.7

# Minimum score for "severe" damage severity (default: 0.9)
# Scores >= this value are considered severe damage
DAMAGE_SCORE_SEVERE_MIN=0.9

# Note: Score ranges should be ordered as follows:
# 0.0 <= none_max < minor_min < minor_max <= moderate_min < moderate_max <= severe_min <= 1.0
# Example Impact on Quality Score:
#   - Damage score 0.05 (none)     → Quality score = 0.95 (95% quality)
#   - Damage score 0.35 (minor)    → Quality score = 0.65 (65% quality)
#   - Damage score 0.65 (moderate) → Quality score = 0.35 (35% quality)
#   - Damage score 0.90 (severe)   → Quality score = 0.10 (10% quality)

# =============================================================================
# Damage Scoring Weighted by Type
# =============================================================================
# Enable weighted damage scoring (default: true)
# When enabled, different damage types are weighted based on business impact
DAMAGE_USE_WEIGHTED_SCORING=true

# Damage Type Weights (must sum to 1.0 or will be normalized)
# These weights determine how much each damage type contributes to overall score
# Higher weights = more impact on final quality score

# Weight for leakage damage (default: 0.4)
# Critical for electronics, food, pharmaceuticals
DAMAGE_WEIGHT_LEAKAGE=0.4

# Weight for box deformation (default: 0.3)
# Important for structural integrity and product protection
DAMAGE_WEIGHT_BOX_DEFORMATION=0.3

# Weight for packaging integrity (default: 0.2)
# Tears, holes, dents in packaging material
DAMAGE_WEIGHT_PACKAGING_INTEGRITY=0.2

# Weight for corner damage (default: 0.1)
# Often cosmetic, less critical for most products
DAMAGE_WEIGHT_CORNER_DAMAGE=0.1

# Severity Score Mapping (MVP)
# These define the numeric scores for each severity level
# Note: These are converted to package_quality (1 - severity_score)
SEVERITY_SCORE_NONE=0.05      # → package_quality: 0.95 (95% quality)
SEVERITY_SCORE_MINOR=0.35     # → package_quality: 0.65 (65% quality)
SEVERITY_SCORE_MODERATE=0.65  # → package_quality: 0.35 (35% quality)
SEVERITY_SCORE_SEVERE=0.9     # → package_quality: 0.1 (10% quality)

# Example Configurations:
# Electronics (strict on moisture):
#   DAMAGE_WEIGHT_LEAKAGE=0.5
#   DAMAGE_WEIGHT_BOX_DEFORMATION=0.25
#   DAMAGE_WEIGHT_PACKAGING_INTEGRITY=0.15
#   DAMAGE_WEIGHT_CORNER_DAMAGE=0.1
#
# Furniture (tolerant of cosmetic damage):
#   DAMAGE_WEIGHT_LEAKAGE=0.3
#   DAMAGE_WEIGHT_BOX_DEFORMATION=0.4
#   DAMAGE_WEIGHT_PACKAGING_INTEGRITY=0.2
#   DAMAGE_WEIGHT_CORNER_DAMAGE=0.1

# =============================================================================
# Notification and Database Configuration
# =============================================================================
# OCI Notification Service topic OCID for alerts (optional)
# NOTIFICATION_TOPIC_ID=<YOUR_TOPIC_ID>

# Database table name for storing quality events (default: "delivery_quality_events")
# QUALITY_TABLE=delivery_quality_events

# =============================================================================
# Local Development Configuration
# =============================================================================
# Local directory path for offline asset testing (optional)
# Set this to a local directory containing test images for development
LOCAL_ASSET_ROOT=./test_assets

# =============================================================================
# OCI Authentication (if not using default profile)
# =============================================================================
# OCI Profile name for authentication (optional, uses default if not set)
# OCI_PROFILE=your_profile_name

# Alternative: Set these if not using OCI config file
# OCI_USER_ID=<YOUR_USER_ID>
# OCI_TENANCY_ID=<YOUR_TENANCY_ID>
# OCI_FINGERPRINT=your_api_key_fingerprint
# OCI_KEY_FILE=~/.oci/oci_api_key.pem
# OCI_REGION=us-ashburn-1
